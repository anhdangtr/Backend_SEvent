openapi: 3.0.0
info:
  title: SEvent API
  description: |
    API documentation cho ·ª©ng d·ª•ng qu·∫£n l√Ω s·ª± ki·ªán SEvent.
    
    ## Authentication
    H·∫ßu h·∫øt c√°c endpoints y√™u c·∫ßu JWT token trong header:
    ```
    Authorization: Bearer <your_jwt_token>
    ```
    
    ## Base URL
    - Production: `https://be-sevent.vercel.app/api` (C·∫≠p nh·∫≠t URL sau khi deploy)
    - Development: `http://localhost:5000/api`
    
    ## T√≠nh nƒÉng ch√≠nh
    - üîê Authentication (JWT)
    - üìÖ Qu·∫£n l√Ω Events (CRUD, Like, Save)
    - ‚è∞ Reminder System v·ªõi Email Notification
    - üìÅ Folder Management cho Saved Events
    - üë• User Management (Admin)
    - üè∑Ô∏è Category System
  version: 1.0.0
  contact:
    name: SEvent Development Team
    email: seventwebsite@gmail.com
    url: https://github.com/anhdangtr/BE_SEvent

servers:
  - url: https://be-sevent.vercel.app/api
    description: Production server (C·∫≠p nh·∫≠t URL c·ªßa b·∫°n sau khi deploy Backend)
  - url: http://localhost:5000/api
    description: Development server

tags:
  - name: Authentication
    description: ƒêƒÉng k√Ω, ƒëƒÉng nh·∫≠p ng∆∞·ªùi d√πng
  - name: Events
    description: Qu·∫£n l√Ω s·ª± ki·ªán (CRUD, like, save, trending)
  - name: Reminders
    description: Qu·∫£n l√Ω nh·∫Øc nh·ªü cho s·ª± ki·ªán
  - name: Saved Events
    description: Qu·∫£n l√Ω s·ª± ki·ªán ƒë√£ l∆∞u v√† folders
  - name: Users
    description: Qu·∫£n l√Ω ng∆∞·ªùi d√πng v√† roles (admin)
  - name: Categories
    description: Qu·∫£n l√Ω danh m·ª•c s·ª± ki·ªán
  - name: User Profile
    description: Xem th√¥ng tin profile ng∆∞·ªùi d√πng
  - name: Cron Jobs
    description: Endpoints cho external cron service

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token t·ª´ endpoint login/signup

  schemas:
    User:
      type: object
      properties:
        _id:
          type: string
          example: "507f1f77bcf86cd799439011"
        email:
          type: string
          format: email
          example: "user@example.com"
        name:
          type: string
          example: "Nguy·ªÖn VƒÉn A"
        role:
          type: string
          enum: [user, admin]
          default: user
        savedFolders:
          type: array
          items:
            $ref: '#/components/schemas/Folder'
        interestingEvents:
          type: array
          items:
            $ref: '#/components/schemas/InterestingEvent'
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Event:
      type: object
      properties:
        _id:
          type: string
          example: "507f1f77bcf86cd799439011"
        title:
          type: string
          example: "H·ªôi th·∫£o AI 2024"
        content:
          type: string
          example: "N·ªôi dung chi ti·∫øt v·ªÅ s·ª± ki·ªán"
        shortDescription:
          type: string
          example: "M√¥ t·∫£ ng·∫Øn g·ªçn"
        bannerUrl:
          type: string
          example: "https://example.com/banner.jpg"
        registrationFormUrl:
          type: string
          example: "https://forms.google.com/..."
        formSubmissionDeadline:
          type: string
          format: date-time
        publishDate:
          type: string
          format: date-time
        startDate:
          type: string
          format: date-time
        endDate:
          type: string
          format: date-time
        location:
          type: string
          example: "TP.HCM"
        category:
          type: string
          example: "507f1f77bcf86cd799439011"
        organization:
          type: string
          example: "UIT"
        createdBy:
          type: string
          example: "507f1f77bcf86cd799439011"
        interestingCount:
          type: number
          default: 0
        saveCount:
          type: number
          default: 0
        interestingEvents:
          type: array
          items:
            type: string
        savedBy:
          type: array
          items:
            type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Reminder:
      type: object
      properties:
        _id:
          type: string
          example: "507f1f77bcf86cd799439011"
        userId:
          type: string
          example: "507f1f77bcf86cd799439011"
        eventId:
          type: string
          example: "507f1f77bcf86cd799439011"
        reminderDateTime:
          type: string
          format: date-time
        note:
          type: string
          example: "Nh·ªõ mang theo laptop"
        isSent:
          type: boolean
          default: false
        createdAt:
          type: string
          format: date-time

    Category:
      type: object
      properties:
        _id:
          type: string
          example: "507f1f77bcf86cd799439011"
        name:
          type: string
          example: "C√¥ng ngh·ªá"
        createdAt:
          type: string
          format: date-time

    Folder:
      type: object
      properties:
        name:
          type: string
          example: "Watch later"
        createdAt:
          type: string
          format: date-time
        events:
          type: array
          items:
            $ref: '#/components/schemas/SavedEvent'

    SavedEvent:
      type: object
      properties:
        event:
          type: string
          example: "507f1f77bcf86cd799439011"
        savedAt:
          type: string
          format: date-time

    InterestingEvent:
      type: object
      properties:
        event:
          type: string
          example: "507f1f77bcf86cd799439011"
        likedAt:
          type: string
          format: date-time

    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: "Error message"

    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Operation successful"
        data:
          type: object

paths:
  # ==================== AUTHENTICATION ====================
  /auth/signup:
    post:
      tags:
        - Authentication
      summary: ƒêƒÉng k√Ω ng∆∞·ªùi d√πng m·ªõi
      description: T·∫°o t√†i kho·∫£n ng∆∞·ªùi d√πng m·ªõi v·ªõi email, password v√† name
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - name
              properties:
                email:
                  type: string
                  format: email
                  example: "newuser@example.com"
                password:
                  type: string
                  format: password
                  example: "SecurePass123"
                passwordConfirm:
                  type: string
                  format: password
                  example: "SecurePass123"
                name:
                  type: string
                  example: "Nguy·ªÖn VƒÉn A"
      responses:
        '201':
          description: ƒêƒÉng k√Ω th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "ƒêƒÉng k√Ω th√†nh c√¥ng"
                  token:
                    type: string
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  user:
                    type: object
                    properties:
                      id:
                        type: string
                      email:
                        type: string
                      name:
                        type: string
                      role_id:
                        type: string
                      created_at:
                        type: string
                        format: date-time
        '400':
          description: Email ƒë√£ ƒë∆∞·ª£c s·ª≠ d·ª•ng
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: L·ªói server
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/login:
    post:
      tags:
        - Authentication
      summary: ƒêƒÉng nh·∫≠p
      description: ƒêƒÉng nh·∫≠p v·ªõi email v√† password ƒë·ªÉ nh·∫≠n JWT token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: "user@example.com"
                password:
                  type: string
                  format: password
                  example: "SecurePass123"
      responses:
        '200':
          description: ƒêƒÉng nh·∫≠p th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "ƒêƒÉng nh·∫≠p th√†nh c√¥ng"
                  token:
                    type: string
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  user:
                    type: object
                    properties:
                      id:
                        type: string
                      email:
                        type: string
                      name:
                        type: string
                      role:
                        type: string
        '400':
          description: Thi·∫øu th√¥ng tin ƒëƒÉng nh·∫≠p
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Email ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ch√≠nh x√°c
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: L·ªói server
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ==================== EVENTS ====================
  /events:
    get:
      tags:
        - Events
      summary: L·∫•y danh s√°ch t·∫•t c·∫£ events
      description: |
        L·∫•y danh s√°ch events v·ªõi pagination, search v√† filter theo category.
        **Public endpoint** - kh√¥ng c·∫ßn authentication
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: S·ªë trang
        - in: query
          name: limit
          schema:
            type: integer
            default: 9
          description: S·ªë l∆∞·ª£ng events m·ªói trang
        - in: query
          name: search
          schema:
            type: string
          description: T√¨m ki·∫øm theo title, location ho·∫∑c organization
        - in: query
          name: category
          schema:
            type: string
          description: Filter theo category ID (ho·∫∑c 'all' ƒë·ªÉ l·∫•y t·∫•t c·∫£)
      responses:
        '200':
          description: Danh s√°ch events
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Event'
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                        example: 1
                      pages:
                        type: integer
                        example: 5
                      total:
                        type: integer
                        example: 45
                      limit:
                        type: integer
                        example: 9
        '500':
          description: L·ªói server
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    post:
      tags:
        - Events
      summary: T·∫°o event m·ªõi (Admin)
      description: T·∫°o m·ªôt s·ª± ki·ªán m·ªõi - y√™u c·∫ßu authentication v√† quy·ªÅn admin
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - createdBy
              properties:
                title:
                  type: string
                  example: "H·ªôi th·∫£o AI 2024"
                content:
                  type: string
                shortDescription:
                  type: string
                bannerUrl:
                  type: string
                registrationFormUrl:
                  type: string
                formSubmissionDeadline:
                  type: string
                  format: date-time
                publishDate:
                  type: string
                  format: date-time
                startDate:
                  type: string
                  format: date-time
                endDate:
                  type: string
                  format: date-time
                location:
                  type: string
                category:
                  type: string
                  description: Category ObjectId
                organization:
                  type: string
                createdBy:
                  type: string
                  description: User ObjectId
      responses:
        '201':
          description: Event ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Event'
        '401':
          description: Unauthorized - c·∫ßn ƒëƒÉng nh·∫≠p
        '500':
          description: L·ªói server
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /events/trending:
    get:
      tags:
        - Events
      summary: L·∫•y events n·ªïi b·∫≠t
      description: |
        L·∫•y danh s√°ch events trending d·ª±a tr√™n l∆∞·ª£t like, save v√† m·ªõi nh·∫•t.
        **Public endpoint** - kh√¥ng c·∫ßn authentication
      parameters:
        - in: query
          name: limit
          schema:
            type: integer
            default: 4
          description: S·ªë l∆∞·ª£ng events c·∫ßn l·∫•y
      responses:
        '200':
          description: Danh s√°ch trending events
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Event'
        '500':
          description: L·ªói server
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /events/{eventId}:
    get:
      tags:
        - Events
      summary: L·∫•y chi ti·∫øt event theo ID
      description: L·∫•y th√¥ng tin chi ti·∫øt c·ªßa m·ªôt event - y√™u c·∫ßu authentication
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
          description: Event ObjectId
      responses:
        '200':
          description: Chi ti·∫øt event
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Event'
        '400':
          description: Invalid event ID format
        '404':
          description: Event not found
        '401':
          description: Unauthorized - c·∫ßn ƒëƒÉng nh·∫≠p
        '500':
          description: L·ªói server

    put:
      tags:
        - Events
      summary: C·∫≠p nh·∫≠t event (Admin)
      description: C·∫≠p nh·∫≠t th√¥ng tin event - y√™u c·∫ßu authentication v√† quy·ªÅn admin
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
          description: Event ObjectId
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                content:
                  type: string
                shortDescription:
                  type: string
                bannerUrl:
                  type: string
                registrationFormUrl:
                  type: string
                formSubmissionDeadline:
                  type: string
                  format: date-time
                publishDate:
                  type: string
                  format: date-time
                startDate:
                  type: string
                  format: date-time
                endDate:
                  type: string
                  format: date-time
                location:
                  type: string
                category:
                  type: string
                organization:
                  type: string
      responses:
        '200':
          description: Event ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Event'
        '400':
          description: Invalid event ID format
        '401':
          description: Unauthorized
        '404':
          description: Event not found
        '500':
          description: L·ªói server

    delete:
      tags:
        - Events
      summary: X√≥a event (Admin)
      description: X√≥a m·ªôt event - y√™u c·∫ßu authentication v√† quy·ªÅn admin
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
          description: Event ObjectId
      responses:
        '200':
          description: Event ƒë∆∞·ª£c x√≥a th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Event deleted successfully"
        '400':
          description: Invalid event ID format
        '401':
          description: Unauthorized
        '404':
          description: Event not found
        '500':
          description: L·ªói server

  /events/{eventId}/check-liked:
    get:
      tags:
        - Events
      summary: Ki·ªÉm tra user ƒë√£ like event ch∆∞a
      description: Ki·ªÉm tra xem user hi·ªán t·∫°i ƒë√£ like event n√†y ch∆∞a
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
          description: Event ObjectId
      responses:
        '200':
          description: Tr·∫°ng th√°i liked
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  isLiked:
                    type: boolean
                    example: true
        '401':
          description: Unauthorized
        '500':
          description: L·ªói server

  /events/{eventId}/check-saved:
    get:
      tags:
        - Events
      summary: Ki·ªÉm tra user ƒë√£ save event ch∆∞a
      description: Ki·ªÉm tra xem user hi·ªán t·∫°i ƒë√£ save event n√†y ch∆∞a
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
          description: Event ObjectId
      responses:
        '200':
          description: Tr·∫°ng th√°i saved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  isSaved:
                    type: boolean
                    example: true
        '401':
          description: Unauthorized
        '500':
          description: L·ªói server

  /events/{eventId}/toggle-like:
    post:
      tags:
        - Events
      summary: Toggle like/unlike event
      description: Like ho·∫∑c unlike m·ªôt event (t√πy theo tr·∫°ng th√°i hi·ªán t·∫°i)
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
          description: Event ObjectId
      responses:
        '200':
          description: Toggle th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Event liked/unliked"
                  isLiked:
                    type: boolean
                  interestingCount:
                    type: number
        '401':
          description: Unauthorized
        '404':
          description: Event not found
        '500':
          description: L·ªói server

  /events/{eventId}/toggle-save:
    post:
      tags:
        - Events
      summary: Toggle save/unsave event
      description: Save ho·∫∑c unsave m·ªôt event (t√πy theo tr·∫°ng th√°i hi·ªán t·∫°i)
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
          description: Event ObjectId
      responses:
        '200':
          description: Toggle th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Event saved/unsaved"
                  isSaved:
                    type: boolean
                  saveCount:
                    type: number
        '401':
          description: Unauthorized
        '404':
          description: Event not found
        '500':
          description: L·ªói server

  # ==================== REMINDERS ====================
  /reminders:
    post:
      tags:
        - Reminders
      summary: T·∫°o reminder m·ªõi
      description: |
        T·∫°o m·ªôt reminder m·ªõi cho event. 
        - Gi·ªõi h·∫°n t·ªëi ƒëa 3 reminders cho m·ªói event
        - Kh√¥ng ƒë∆∞·ª£c tr√πng th·ªùi gian reminder cho c√πng 1 event
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - eventId
                - reminderDateTime
              properties:
                eventId:
                  type: string
                  example: "507f1f77bcf86cd799439011"
                reminderDateTime:
                  type: string
                  format: date-time
                  example: "2024-12-15T09:00:00.000Z"
                note:
                  type: string
                  example: "Nh·ªõ mang theo laptop"
      responses:
        '201':
          description: Reminder ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Reminder'
                  message:
                    type: string
                    example: "Reminder created successfully"
        '400':
          description: |
            - Event ID is required
            - Ch·ªâ ƒë∆∞·ª£c ƒë·∫∑t t·ªëi ƒëa 3 reminder cho m·ªôt s·ª± ki·ªán
            - Th·ªùi gian reminder n√†y ƒë√£ t·ªìn t·∫°i
        '401':
          description: Unauthorized
        '404':
          description: Event not found
        '500':
          description: L·ªói server

  /reminders/{eventId}:
    get:
      tags:
        - Reminders
      summary: L·∫•y danh s√°ch reminders cho event
      description: L·∫•y t·∫•t c·∫£ reminders c·ªßa user hi·ªán t·∫°i cho m·ªôt event c·ª• th·ªÉ
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
          description: Event ObjectId
      responses:
        '200':
          description: Danh s√°ch reminders
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Reminder'
        '401':
          description: Unauthorized
        '500':
          description: L·ªói server

  /reminders/{reminderId}:
    put:
      tags:
        - Reminders
      summary: C·∫≠p nh·∫≠t reminder
      description: |
        C·∫≠p nh·∫≠t th√¥ng tin reminder.
        - Ch·ªâ owner m·ªõi c√≥ th·ªÉ c·∫≠p nh·∫≠t
        - Kh√¥ng ƒë∆∞·ª£c tr√πng th·ªùi gian v·ªõi reminders kh√°c c·ªßa c√πng event
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: reminderId
          required: true
          schema:
            type: string
          description: Reminder ObjectId
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                reminderDateTime:
                  type: string
                  format: date-time
                note:
                  type: string
      responses:
        '200':
          description: Reminder ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Reminder'
                  message:
                    type: string
                    example: "Reminder updated successfully"
        '400':
          description: Th·ªùi gian reminder n√†y ƒë√£ t·ªìn t·∫°i
        '401':
          description: Unauthorized
        '403':
          description: Not authorized - kh√¥ng ph·∫£i owner
        '404':
          description: Reminder not found
        '500':
          description: L·ªói server

    delete:
      tags:
        - Reminders
      summary: X√≥a reminder
      description: X√≥a m·ªôt reminder - ch·ªâ owner m·ªõi c√≥ th·ªÉ x√≥a
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: reminderId
          required: true
          schema:
            type: string
          description: Reminder ObjectId
      responses:
        '200':
          description: Reminder ƒë∆∞·ª£c x√≥a th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Reminder deleted successfully"
        '401':
          description: Unauthorized
        '403':
          description: Not authorized - kh√¥ng ph·∫£i owner
        '404':
          description: Reminder not found
        '500':
          description: L·ªói server

  # ==================== SAVED EVENTS ====================
  /saved-events:
    get:
      tags:
        - Saved Events
      summary: L·∫•y t·∫•t c·∫£ events ƒë√£ save
      description: L·∫•y danh s√°ch t·∫•t c·∫£ events m√† user ƒë√£ save t·ª´ t·∫•t c·∫£ c√°c folders
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Danh s√°ch saved events
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        folder:
                          type: string
                          example: "Watch later"
                        event:
                          $ref: '#/components/schemas/Event'
                        savedAt:
                          type: string
                          format: date-time
        '401':
          description: Unauthorized
        '500':
          description: L·ªói server

    post:
      tags:
        - Saved Events
      summary: Save event v√†o folder
      description: |
        L∆∞u m·ªôt event v√†o folder c·ªßa user.
        - N·∫øu kh√¥ng ch·ªâ ƒë·ªãnh folder, m·∫∑c ƒë·ªãnh l√† "Watch later"
        - T·ª± ƒë·ªông t·∫°o folder m·ªõi n·∫øu ch∆∞a t·ªìn t·∫°i
        - Kh√¥ng th·ªÉ save tr√πng event trong c√πng 1 folder
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - eventId
              properties:
                eventId:
                  type: string
                  example: "507f1f77bcf86cd799439011"
                folderName:
                  type: string
                  example: "Watch later"
                  default: "Watch later"
      responses:
        '201':
          description: Event ƒë∆∞·ª£c save th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Event saved successfully"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Folder'
        '400':
          description: |
            - Event ID is required
            - Event is already saved in this folder
        '401':
          description: Unauthorized
        '404':
          description: Event not found
        '500':
          description: L·ªói server

  /saved-events/{eventId}:
    put:
      tags:
        - Saved Events
      summary: Di chuy·ªÉn event sang folder kh√°c
      description: |
        Di chuy·ªÉn m·ªôt saved event t·ª´ folder hi·ªán t·∫°i sang folder m·ªõi.
        - T·ª± ƒë·ªông t·∫°o folder m·ªõi n·∫øu ch∆∞a t·ªìn t·∫°i
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
          description: Event ObjectId
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - newFolder
              properties:
                newFolder:
                  type: string
                  example: "Music Events"
      responses:
        '200':
          description: Event ƒë∆∞·ª£c di chuy·ªÉn th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Event moved successfully"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Folder'
        '400':
          description: New folder name required
        '401':
          description: Unauthorized
        '404':
          description: Event not found in any folder
        '500':
          description: L·ªói server

    delete:
      tags:
        - Saved Events
      summary: X√≥a saved event
      description: X√≥a m·ªôt event kh·ªèi t·∫•t c·∫£ c√°c folders c·ªßa user
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
          description: Event ObjectId
      responses:
        '200':
          description: Event ƒë∆∞·ª£c x√≥a th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Event removed from saved list"
        '401':
          description: Unauthorized
        '404':
          description: Event not found in any folder
        '500':
          description: L·ªói server

  /saved-events/get-folders:
    get:
      tags:
        - Saved Events
      summary: L·∫•y danh s√°ch t√™n c√°c folders
      description: L·∫•y danh s√°ch t√™n t·∫•t c·∫£ c√°c folders c·ªßa user
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Danh s√°ch folder names
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: string
                    example: ["Watch later", "Music Events", "Tech Conferences"]
        '401':
          description: Unauthorized
        '500':
          description: L·ªói server

  /saved-events/post-folders:
    post:
      tags:
        - Saved Events
      summary: T·∫°o folder m·ªõi
      description: T·∫°o m·ªôt folder m·ªõi (r·ªóng) cho user
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - folderName
              properties:
                folderName:
                  type: string
                  example: "Music Events"
      responses:
        '201':
          description: Folder ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Folder created successfully"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Folder'
        '400':
          description: |
            - Folder name is required
            - Folder already exists
        '401':
          description: Unauthorized
        '500':
          description: L·ªói server

  /saved-events/folder/{folderName}:
    get:
      tags:
        - Saved Events
      summary: L·∫•y events theo folder
      description: L·∫•y t·∫•t c·∫£ events trong m·ªôt folder c·ª• th·ªÉ
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: folderName
          required: true
          schema:
            type: string
          description: T√™n folder
          example: "Watch later"
      responses:
        '200':
          description: Danh s√°ch events trong folder
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        event:
                          $ref: '#/components/schemas/Event'
                        savedAt:
                          type: string
                          format: date-time
        '401':
          description: Unauthorized
        '404':
          description: Folder not found
        '500':
          description: L·ªói server

  # ==================== USERS ====================
  /users/getAllUser:
    get:
      tags:
        - Users
      summary: L·∫•y danh s√°ch t·∫•t c·∫£ users (Admin)
      description: |
        L·∫•y danh s√°ch users v·ªõi pagination v√† search.
        **Public endpoint** nh∆∞ng n√™n c√≥ middleware ki·ªÉm tra admin
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: S·ªë trang
        - in: query
          name: search
          schema:
            type: string
          description: T√¨m ki·∫øm theo name ho·∫∑c email
      responses:
        '200':
          description: Danh s√°ch users
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  users:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
                  totalUsers:
                    type: integer
                    example: 45
                  totalPages:
                    type: integer
                    example: 5
                  currentPage:
                    type: integer
                    example: 1
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /users/updateRoleUser/{id}:
    put:
      tags:
        - Users
      summary: Swap role v·ªõi user kh√°c (Admin)
      description: |
        ƒê·ªïi role gi·ªØa current user v√† target user.
        - C·∫ßn authentication
        - Sau khi swap, current user s·∫Ω b·ªã logout
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Target user ObjectId
      responses:
        '200':
          description: Roles swapped successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Roles swapped successfully"
                  currentUserNewRole:
                    type: string
                    example: "user"
                  targetUserNewRole:
                    type: string
                    example: "admin"
                  logout:
                    type: boolean
                    example: true
        '401':
          description: Unauthorized
        '404':
          description: User not found
        '500':
          description: Server error

  # ==================== USER PROFILE ====================
  /users/{userID}/profile:
    get:
      tags:
        - User Profile
      summary: L·∫•y th√¥ng tin profile c·ªßa user
      description: L·∫•y th√¥ng tin name, email, role c·ªßa user
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: userID
          required: true
          schema:
            type: string
          description: User ObjectId
      responses:
        '200':
          description: Th√¥ng tin profile
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    example: "Nguy·ªÖn VƒÉn A"
                  email:
                    type: string
                    example: "user@example.com"
                  role:
                    type: string
                    example: "user"
        '401':
          description: Unauthorized
        '404':
          description: User not found
        '500':
          description: Server error

  # ==================== CATEGORIES ====================
  /categories/{id}:
    delete:
      tags:
        - Categories
      summary: X√≥a category (Admin)
      description: |
        X√≥a m·ªôt category v√† t·∫•t c·∫£ events li√™n quan.
        - Middleware trong model s·∫Ω t·ª± ƒë·ªông x√≥a c√°c events thu·ªôc category n√†y
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Category ObjectId
      responses:
        '200':
          description: Category v√† related events ƒë∆∞·ª£c x√≥a th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Category and related events deleted"
        '404':
          description: Category not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Category not found"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string

  # ==================== CRON JOBS ====================
  /cron/check-reminders:
    get:
      tags:
        - Cron Jobs
      summary: Check v√† g·ª≠i reminders (External Cron Service)
      description: |
        Endpoint ƒë∆∞·ª£c g·ªçi b·ªüi external cron service ƒë·ªÉ check v√† g·ª≠i email reminders.
        
        **B·∫£o m·∫≠t:**
        - Y√™u c·∫ßu secret key trong header `x-cron-secret` ho·∫∑c query param `secret`
        - Secret ph·∫£i kh·ªõp v·ªõi `process.env.CRON_SECRET`
        
        **Logic:**
        - T√¨m c√°c reminders ch∆∞a g·ª≠i (isSent=false)
        - Trong kho·∫£ng th·ªùi gian t·ª´ 2 ph√∫t tr∆∞·ªõc ƒë·∫øn hi·ªán t·∫°i
        - G·ª≠i email cho t·ª´ng reminder
        - ƒê√°nh d·∫•u isSent=true sau khi g·ª≠i th√†nh c√¥ng
      parameters:
        - in: query
          name: secret
          schema:
            type: string
          description: Cron secret key (alternative to header)
        - in: header
          name: x-cron-secret
          schema:
            type: string
          description: Cron secret key
      responses:
        '200':
          description: Check reminders ho√†n t·∫•t
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Cron job completed"
                  stats:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 5
                      sent:
                        type: integer
                        example: 4
                      failed:
                        type: integer
                        example: 1
                      timestamp:
                        type: string
                        format: date-time
        '401':
          description: Unauthorized - sai ho·∫∑c thi·∫øu secret key
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Unauthorized"
                  debug:
                    type: object
                    properties:
                      receivedSecret:
                        type: string
                        example: "provided"
                      expectedSecret:
                        type: string
                        example: "configured"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Error processing reminders"
                  error:
                    type: string
